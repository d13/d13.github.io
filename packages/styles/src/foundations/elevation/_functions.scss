@use 'sass:math';

@function key-shadow($level, $inset: false) {
  @if $level < 1 {
    @return 0 0 0 0 rgba(0,0,0,0.16);
  }

  $amount: $level - 8;
  $amount-var: var(--scale-#{$amount});

  @if $inset {
    @return inset 0 calc($amount-var * -1) $amount-var calc($amount-var * -1) rgba(0,0,0,0.17);
  }

  @return 0 $amount-var $amount-var 0 rgba(0,0,0,0.17);
}

@function ambient-shadow($level, $inset: false) {
  @if $level < 1 {
    @return 0 0 0 0 rgba(0,0,0,0.08);
  }

  $amount: $level - 8;
  $distance: if($level < 2, -8, $amount - 1);
  $heft: if($level < 2, -8, math.clamp(-8, $amount - math.floor(math.div($level, 2)), 9));

  $amount-var: var(--scale-#{$amount});
  $distance-var: var(--scale-#{$distance});

  @if $inset {
    @return inset 0 calc($distance-var * -1) $amount-var calc($amount-var * -1) rgba(0,0,0,0.08);
  }
  $heft-var: var(--scale-#{$heft});

  @return 0 $distance-var $amount-var $heft-var rgba(0,0,0,0.08);
}

@function fill-shadow($level, $inset: false) {
  @if $level < 2 {
    @return 0 0 0 0 rgba(0,0,0,0.08);
  }

  $distance: $level - 8;
  $amount: if($level < 3, -8, $distance - 2);
  $heft: if($level < 2, -8, math.clamp(-8, $distance - math.floor(math.div($level, 2)), 9));

  $distance-var: var(--scale-#{$distance});
  $amount-var: var(--scale-#{$amount});

  @if $inset {
    @return inset 0 calc($distance-var * -1) $amount-var calc($amount-var * -1) rgba(0,0,0,0.25);
  }
  $heft-var: var(--scale-#{$heft});

  @return 0 $distance-var $amount-var calc($heft-var * -1) rgba(0,0,0,0.25);
}
